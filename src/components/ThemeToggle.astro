---

---

<button
  id="theme-toggle"
  aria-label="Toggle light/dark theme"
  class="fixed top-4 right-4 z-50 p-3 bg-background/80 backdrop-blur-sm border border-border/50 rounded-lg hover:bg-muted"
>
  <svg
    id="sun-icon"
    class="h-5 w-5 text-foreground hidden"
    fill="currentColor"
    â‰ˆ
    viewBox="0 0 24 24"
  >
    <path
      d="M12 17.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM12 1.75a.75.75 0 0 1 .75.75v1a.75.75 0 0 1-1.5 0v-1a.75.75 0 0 1 .75-.75zM4.22 4.22a.75.75 0 0 1 1.06 0l.71.71a.75.75 0 0 1-1.06 1.06l-.71-.71a.75.75 0 0 1 0-1.06zM1.75 12a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75zM4.22 19.78a.75.75 0 0 1 0-1.06l.71-.71a.75.75 0 1 1 1.06 1.06l-.71.71a.75.75 0 0 1-1.06 0zM12 20.25a.75.75 0 0 1 .75.75v1a.75.75 0 0 1-1.5 0v-1a.75.75 0 0 1 .75-.75zM19.78 19.78a.75.75 0 0 1-1.06 0l-.71-.71a.75.75 0 0 1 1.06-1.06l.71.71a.75.75 0 0 1 0 1.06zM20.25 12a.75.75 0 0 1 .75.75h1a.75.75 0 0 1 0-1.5h-1a.75.75 0 0 1-.75-.75zM19.78 4.22a.75.75 0 0 1 0 1.06l-.71.71a.75.75 0 0 1-1.06-1.06l.71-.71a.75.75 0 0 1 1.06 0z"
    ></path>
  </svg>
  <svg
    id="moon-icon"
    class="h-5 w-5 text-black"
    fill="currentColor"
    viewBox="0 0 24 24"
  >
    <path
      d="M17.293 13.293A8 8 0 0 1 6.707 2.707a8.001 8.001 0 1 0 10.586 10.586z"
    ></path>
  </svg>
</button>

<script is:inline>
  function initTheme() {
    const theme = localStorage.getItem("theme");
    const systemPrefersDark = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches;

    const isDark = theme === "dark" || (!theme && systemPrefersDark);

    if (isDark) {
      document.documentElement.classList.add("dark");
      // when dark theme is selected the button aria label should say switch to light and vice versa
    } else {
      document.documentElement.classList.remove("dark");
    }

    updateIcons(isDark);
  }

  function updateIcons(isDark) {
    const sunIcon = document.getElementById("sun-icon");
    const moonIcon = document.getElementById("moon-icon");

    if (isDark) {
      sunIcon?.classList.remove("hidden");
      moonIcon?.classList.add("hidden");
    } else {
      sunIcon?.classList.add("hidden");
      moonIcon?.classList.remove("hidden");
    }
  }

  function toggleTheme() {
    const isDark = document.documentElement.classList.contains("dark");
    const newTheme = !isDark;

    if (newTheme) {
      document.documentElement.classList.add("dark");
      localStorage.setItem("theme", "dark");
    } else {
      document.documentElement.classList.remove("dark");
      localStorage.setItem("theme", "light");
    }

    updateIcons(newTheme);
  }

  initTheme();

  document
    .getElementById("theme-toggle")
    ?.addEventListener("click", toggleTheme);
</script>
